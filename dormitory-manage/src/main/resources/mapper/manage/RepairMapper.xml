<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lz.manage.mapper.RepairMapper">
    
    <resultMap type="Repair" id="RepairResult">
        <result property="id"    column="id"    />
        <result property="buildingId"    column="building_id"    />
        <result property="dormitoryId"    column="dormitory_id"    />
        <result property="bedId"    column="bed_id"    />
        <result property="type"    column="type"    />
        <result property="abnormalStatus"    column="abnormal_status"    />
        <result property="status"    column="status"    />
        <result property="repairAddress"    column="repair_address"    />
        <result property="repairTime"    column="repair_time"    />
        <result property="repairImage"    column="repair_image"    />
        <result property="repairContent"    column="repair_content"    />
        <result property="contactUser"    column="contact_user"    />
        <result property="contactPhone"    column="contact_phone"    />
        <result property="completedTime"    column="completed_time"    />
        <result property="dealWithCost"    column="deal_with_cost"    />
        <result property="remark"    column="remark"    />
        <result property="dealWithId"    column="deal_with_id"    />
        <result property="userId"    column="user_id"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectRepairVo">
        select id, building_id, dormitory_id, bed_id, type, abnormal_status, status, repair_address, repair_time, repair_image, repair_content, contact_user, contact_phone, completed_time, deal_with_cost, remark, deal_with_id, user_id, create_time, update_time from tb_repair
    </sql>

    <select id="selectRepairList" parameterType="Repair" resultMap="RepairResult">
        <include refid="selectRepairVo"/>
        <where>  
            <if test="id != null "> and id = #{id}</if>
            <if test="buildingId != null "> and building_id = #{buildingId}</if>
            <if test="dormitoryId != null "> and dormitory_id = #{dormitoryId}</if>
            <if test="bedId != null "> and bed_id = #{bedId}</if>
            <if test="type != null  and type != ''"> and type = #{type}</if>
            <if test="abnormalStatus != null  and abnormalStatus != ''"> and abnormal_status = #{abnormalStatus}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
            <if test="repairAddress != null  and repairAddress != ''"> and repair_address = #{repairAddress}</if>
            <if test="createTime != null "> and create_time = #{createTime}</if>
        </where>
    </select>
    
    <select id="selectRepairById" parameterType="Long" resultMap="RepairResult">
        <include refid="selectRepairVo"/>
        where id = #{id}
    </select>

    <insert id="insertRepair" parameterType="Repair" useGeneratedKeys="true" keyProperty="id">
        insert into tb_repair
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="buildingId != null">building_id,</if>
            <if test="dormitoryId != null">dormitory_id,</if>
            <if test="bedId != null">bed_id,</if>
            <if test="type != null and type != ''">type,</if>
            <if test="abnormalStatus != null and abnormalStatus != ''">abnormal_status,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="repairAddress != null and repairAddress != ''">repair_address,</if>
            <if test="repairTime != null">repair_time,</if>
            <if test="repairImage != null">repair_image,</if>
            <if test="repairContent != null and repairContent != ''">repair_content,</if>
            <if test="contactUser != null">contact_user,</if>
            <if test="contactPhone != null">contact_phone,</if>
            <if test="completedTime != null">completed_time,</if>
            <if test="dealWithCost != null">deal_with_cost,</if>
            <if test="remark != null and remark != ''">remark,</if>
            <if test="dealWithId != null">deal_with_id,</if>
            <if test="userId != null">user_id,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="buildingId != null">#{buildingId},</if>
            <if test="dormitoryId != null">#{dormitoryId},</if>
            <if test="bedId != null">#{bedId},</if>
            <if test="type != null and type != ''">#{type},</if>
            <if test="abnormalStatus != null and abnormalStatus != ''">#{abnormalStatus},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="repairAddress != null and repairAddress != ''">#{repairAddress},</if>
            <if test="repairTime != null">#{repairTime},</if>
            <if test="repairImage != null">#{repairImage},</if>
            <if test="repairContent != null and repairContent != ''">#{repairContent},</if>
            <if test="contactUser != null">#{contactUser},</if>
            <if test="contactPhone != null">#{contactPhone},</if>
            <if test="completedTime != null">#{completedTime},</if>
            <if test="dealWithCost != null">#{dealWithCost},</if>
            <if test="remark != null and remark != ''">#{remark},</if>
            <if test="dealWithId != null">#{dealWithId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updateRepair" parameterType="Repair">
        update tb_repair
        <trim prefix="SET" suffixOverrides=",">
            <if test="buildingId != null">building_id = #{buildingId},</if>
            <if test="dormitoryId != null">dormitory_id = #{dormitoryId},</if>
            <if test="bedId != null">bed_id = #{bedId},</if>
            <if test="type != null and type != ''">type = #{type},</if>
            <if test="abnormalStatus != null and abnormalStatus != ''">abnormal_status = #{abnormalStatus},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="repairAddress != null and repairAddress != ''">repair_address = #{repairAddress},</if>
            <if test="repairTime != null">repair_time = #{repairTime},</if>
            <if test="repairImage != null">repair_image = #{repairImage},</if>
            <if test="repairContent != null and repairContent != ''">repair_content = #{repairContent},</if>
            <if test="contactUser != null">contact_user = #{contactUser},</if>
            <if test="contactPhone != null">contact_phone = #{contactPhone},</if>
            <if test="completedTime != null">completed_time = #{completedTime},</if>
            <if test="dealWithCost != null">deal_with_cost = #{dealWithCost},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
            <if test="dealWithId != null">deal_with_id = #{dealWithId},</if>
            <if test="userId != null">user_id = #{userId},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteRepairById" parameterType="Long">
        delete from tb_repair where id = #{id}
    </delete>

    <delete id="deleteRepairByIds" parameterType="String">
        delete from tb_repair where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>